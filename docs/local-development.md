# æœ¬åœ°é–‹ç™¼æŒ‡å—

æœ¬æŒ‡å—èªªæ˜å¦‚ä½•åœ¨æœ¬åœ°ç’°å¢ƒä½¿ç”¨ `npm run dev` é€²è¡Œå‰ç«¯é–‹ç™¼ã€‚

---

## å‰ç½®éœ€æ±‚

### å¿…è¦è»Ÿé«”
- **Node.js**: ç‰ˆæœ¬ 18.x æˆ–æ›´é«˜
- **npm**: ç‰ˆæœ¬ 9.x æˆ–æ›´é«˜
- **å¾Œç«¯æœå‹™**: Backend API å¿…é ˆå·²ç¶“å•Ÿå‹•

### æª¢æŸ¥ç‰ˆæœ¬
```bash
node -v    # æ‡‰è©²é¡¯ç¤º v18.x æˆ–æ›´é«˜
npm -v     # æ‡‰è©²é¡¯ç¤º 9.x æˆ–æ›´é«˜
```

---

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

é€²å…¥ frontend ç›®éŒ„ä¸¦å®‰è£ä¾è³´ï¼š

```bash
cd frontend
npm install
```

### 2. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨

å‰ç«¯æä¾›å¤šç¨®é–‹ç™¼æ¨¡å¼ï¼š

#### æ¨™æº–é–‹ç™¼æ¨¡å¼ (Port 3000)
```bash
npm run dev
```
- ä½¿ç”¨é è¨­é…ç½®
- ç›£è½ `http://localhost:3000`
- é©åˆåŸºæœ¬é–‹ç™¼

#### æœ¬åœ°é–‹ç™¼æ¨¡å¼ (Port 3304)
```bash
npm run dev:local
```
- é€£æ¥æœ¬åœ°å¾Œç«¯ API (`http://localhost:9217/api`)
- ç›£è½ `http://localhost:3304`
- **æ¨è–¦ç”¨æ–¼æœ¬åœ°å®Œæ•´é–‹ç™¼**

#### ç”Ÿç”¢ç’°å¢ƒæ¨¡å¼ (Port 3304)
```bash
npm run dev:production
```
- é€£æ¥ç”Ÿç”¢ç’°å¢ƒ API (`https://promotion.mercylife.cc/api`)
- ç›£è½ `http://localhost:3304`
- ç”¨æ–¼æ¸¬è©¦ç”Ÿç”¢ç’°å¢ƒé€£æ¥

---

## é–‹ç™¼æ¨¡å¼å°ç…§è¡¨

| æŒ‡ä»¤ | ç«¯å£ | API åœ°å€ | ä½¿ç”¨å ´æ™¯ |
|------|------|---------|---------|
| `npm run dev` | 3000 | é è¨­ | åŸºæœ¬é–‹ç™¼ |
| `npm run dev:local` | 3304 | `http://localhost:9217/api` | **æœ¬åœ°å®Œæ•´é–‹ç™¼** â­ |
| `npm run dev:production` | 3304 | `https://promotion.mercylife.cc/api` | ç”Ÿç”¢ç’°å¢ƒæ¸¬è©¦ |

---

## æ¨è–¦é–‹ç™¼æµç¨‹

### å®Œæ•´æœ¬åœ°é–‹ç™¼ç’°å¢ƒ

1. **å•Ÿå‹•å¾Œç«¯æœå‹™** (Docker)
```bash
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„
docker compose up -d

# ç¢ºèªå¾Œç«¯ API æ­£å¸¸
curl http://localhost:9217/api/test
```

2. **å•Ÿå‹•å‰ç«¯é–‹ç™¼æœå‹™å™¨**
```bash
# é€²å…¥ frontend ç›®éŒ„
cd frontend

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨ï¼ˆæ¨è–¦ä½¿ç”¨ dev:localï¼‰
npm run dev:local
```

3. **é–‹å§‹é–‹ç™¼**
- è¨ªå• `http://localhost:3304`
- ä¿®æ”¹ä»£ç¢¼æœƒè‡ªå‹•ç†±é‡è¼‰
- å¾Œç«¯ API é€£æ¥åˆ° `http://localhost:9217/api`

### ç´”å‰ç«¯é–‹ç™¼

å¦‚æœåªéœ€è¦é–‹ç™¼å‰ç«¯ UIï¼Œä¸éœ€è¦å¾Œç«¯åŠŸèƒ½ï¼š

```bash
cd frontend
npm run dev
```

è¨ªå• `http://localhost:3000` é€²è¡Œå‰ç«¯é–‹ç™¼ã€‚

---

## é–‹ç™¼ç‰¹æ€§

### ğŸ”¥ ç†±æ¨¡å¡Šæ›¿æ› (HMR)
- ä¿®æ”¹ `.vue`ã€`.js`ã€`.ts` æ–‡ä»¶æœƒè‡ªå‹•åˆ·æ–°
- ä¿æŒæ‡‰ç”¨ç‹€æ…‹
- ç„¡éœ€æ‰‹å‹•åˆ·æ–°ç€è¦½å™¨

### ğŸ› é–‹ç™¼å·¥å…·
- **Vue DevTools**: æŒ‰ `Shift + Alt + D` å•Ÿå‹•
- è©³ç´°çš„éŒ¯èª¤è¨Šæ¯
- çµ„ä»¶æ¨¹æª¢æŸ¥

### âš¡ å¿«é€Ÿç·¨è­¯
- ä½¿ç”¨ Vite é€²è¡Œæ¥µé€Ÿç·¨è­¯
- æŒ‰éœ€ç·¨è­¯ï¼Œåªç·¨è­¯ä¿®æ”¹çš„æ–‡ä»¶

---

## ç«¯å£èªªæ˜

### å‰ç«¯ç«¯å£
- **Port 3000**: `npm run dev` é è¨­ç«¯å£
- **Port 3304**: `npm run dev:local` å’Œ `npm run dev:production` ä½¿ç”¨ç«¯å£

### å¾Œç«¯ç«¯å£
- **Port 9217**: é–‹ç™¼ç’°å¢ƒå¾Œç«¯ API
- **Port 8217**: æ¸¬è©¦ç’°å¢ƒå¾Œç«¯ API

### é¿å…ç«¯å£è¡çª
å¦‚æœç«¯å£è¢«ä½”ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ `package.json` ä¸­çš„ç«¯å£ï¼š

```json
{
  "scripts": {
    "dev": "nuxt dev --port 3001",
    "dev:local": "cross-env NODE_ENV=development API_BASE_URL=http://localhost:9217/api nuxt dev --port 3305"
  }
}
```

---

## å¸¸è¦‹å•é¡Œ

### Q1: npm install å¤±æ•—

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æ¸…ç†å¿«å–
npm cache clean --force

# åˆªé™¤èˆŠä¾è³´
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£
npm install
```

### Q2: ç«¯å£è¢«ä½”ç”¨

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾ä½”ç”¨ç«¯å£çš„é€²ç¨‹ (Linux/Mac)
lsof -i :3000

# æˆ–ä½¿ç”¨ netstat
netstat -tulpn | grep 3000

# çµ‚æ­¢é€²ç¨‹
kill -9 <PID>
```

### Q3: API é€£æ¥å¤±æ•—

**æª¢æŸ¥æ¸…å–®**:
1. ç¢ºèªå¾Œç«¯æœå‹™å·²å•Ÿå‹•
   ```bash
   curl http://localhost:9217/api/test
   ```

2. æª¢æŸ¥ CORS è¨­å®š
   - å¾Œç«¯ `Cors.php` æ‡‰åŒ…å«å‰ç«¯åœ°å€

3. ç¢ºèªç’°å¢ƒè®Šæ•¸
   - `npm run dev:local` ä½¿ç”¨ `http://localhost:9217/api`

### Q4: ç†±é‡è¼‰ä¸å·¥ä½œ

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# åœæ­¢é–‹ç™¼æœå‹™å™¨
# Ctrl+C

# æ¸…ç†å»ºç½®ç·©å­˜
rm -rf .nuxt dist

# é‡æ–°å•Ÿå‹•
npm run dev:local
```

### Q5: æ¨¡çµ„æ‰¾ä¸åˆ°

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# é‡æ–°ç”Ÿæˆé¡å‹å®šç¾©
npm run postinstall

# æˆ–
npx nuxt prepare
```

---

## å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬

### é–‹ç™¼å®Œæˆå¾Œå»ºç½®

```bash
# æ¨™æº–å»ºç½®
npm run build

# ç”Ÿç”¢ç’°å¢ƒå»ºç½®
npm run build:production

# é è¦½å»ºç½®çµæœ
npm run preview
```

### å»ºç½®è¼¸å‡º
- å»ºç½®æ–‡ä»¶ä½æ–¼ `.output` ç›®éŒ„
- éœæ…‹è³‡æºä½æ–¼ `.output/public`
- æœå‹™ç«¯ä»£ç¢¼ä½æ–¼ `.output/server`

---

## VS Code æ¨è–¦è¨­å®š

### æ¨è–¦æ“´å……å¥—ä»¶
- **Volar**: Vue 3 èªæ³•æ”¯æ´
- **ESLint**: ä»£ç¢¼æª¢æŸ¥
- **Prettier**: ä»£ç¢¼æ ¼å¼åŒ–
- **Vue VSCode Snippets**: Vue ä»£ç¢¼ç‰‡æ®µ

### `.vscode/settings.json`
```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[vue]": {
    "editor.defaultFormatter": "Vue.volar"
  },
  "files.associations": {
    "*.vue": "vue"
  }
}
```

---

## æ•ˆèƒ½å„ªåŒ–å»ºè­°

### é–‹ç™¼ç’°å¢ƒ
1. **ä½¿ç”¨ dev:local**: é€£æ¥æœ¬åœ°å¾Œç«¯ï¼Œæ¸›å°‘ç¶²çµ¡å»¶é²
2. **ç†±é‡è¼‰**: åˆ©ç”¨ HMR å¿«é€Ÿçœ‹åˆ°è®Šæ›´
3. **åƒ…è¼‰å…¥éœ€è¦çš„æ¨¡çµ„**: æŒ‰éœ€å°å…¥æ¸›å°‘å»ºç½®æ™‚é–“

### ç”Ÿç”¢ç’°å¢ƒ
1. **ç¨‹å¼ç¢¼åˆ†å‰²**: è‡ªå‹•é€²è¡Œè·¯ç”±å±¤ç´šçš„ä»£ç¢¼åˆ†å‰²
2. **Tree-shaking**: ç§»é™¤æœªä½¿ç”¨çš„ä»£ç¢¼
3. **å£“ç¸®**: è‡ªå‹•å£“ç¸® JavaScript å’Œ CSS

---

## ç›¸é—œæŒ‡ä»¤åƒè€ƒ

```bash
# å®‰è£ä¾è³´
npm install

# é–‹ç™¼æ¨¡å¼
npm run dev              # Port 3000
npm run dev:local        # Port 3304 + æœ¬åœ° API
npm run dev:production   # Port 3304 + ç”Ÿç”¢ API

# å»ºç½®
npm run build           # æ¨™æº–å»ºç½®
npm run build:production # ç”Ÿç”¢ç’°å¢ƒå»ºç½®

# å…¶ä»–
npm run generate        # ç”Ÿæˆéœæ…‹ç¶²ç«™
npm run preview         # é è¦½å»ºç½®çµæœ
npm run lint            # ä»£ç¢¼æª¢æŸ¥
npm run typecheck       # TypeScript é¡å‹æª¢æŸ¥
```

---

## é–‹ç™¼æœ€ä½³å¯¦è¸

1. **ä½¿ç”¨ dev:local**: æ¨è–¦ä½¿ç”¨ `npm run dev:local` é€²è¡Œå®Œæ•´é–‹ç™¼
2. **å³æ™‚é è¦½**: åˆ©ç”¨ç†±é‡è¼‰æŸ¥çœ‹å³æ™‚è®Šæ›´
3. **æª¢æŸ¥é¡å‹**: å®šæœŸåŸ·è¡Œ `npm run typecheck` æª¢æŸ¥é¡å‹éŒ¯èª¤
4. **ä¿æŒä¾è³´æ›´æ–°**: å®šæœŸæ›´æ–° npm ä¾è³´ä¿æŒå®‰å…¨
5. **ä½¿ç”¨ DevTools**: å–„ç”¨ Vue DevTools é€²è¡Œé™¤éŒ¯

---

## ç²å–å¹«åŠ©

é‡åˆ°å•é¡Œæ™‚ï¼š
1. æŸ¥çœ‹æ§åˆ¶å°éŒ¯èª¤è¨Šæ¯
2. æª¢æŸ¥ç¶²çµ¡è«‹æ±‚ (ç€è¦½å™¨ DevTools)
3. æŸ¥çœ‹å¾Œç«¯æ—¥èªŒ (`docker compose logs backend`)
4. åƒè€ƒ [Nuxt å®˜æ–¹æ–‡æª”](https://nuxt.com)
5. æŸ¥çœ‹å°ˆæ¡ˆ [CLAUDE.md](../CLAUDE.md) é–‹ç™¼è¦ç¯„